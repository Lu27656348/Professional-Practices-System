<div style="display: flex; justify-content: center; background-color: aliceblue; flex-direction: column; height: 100%;" *ngIf="generadorAbierto">
    <h1 style="display: flex; align-items: center; justify-content: center; margin-top: 5%;"><strong>Evaluación de Informe Escrito - {{ (tutorAcademico) ? "Tutor Académico" : "Jurado"}}</strong></h1>
    <p style=" display: flex; align-items: center; justify-content: center;">Bienvenido {{tutorData?.userLastName + ", " + tutorData?.userFirstName}}</p>
    <p style=" display: flex; align-items: center; justify-content: center; margin-bottom: 1%;" >Para generar la planillas selecciona todos los criterios y se creará automáticamente </p>
    <div style=" height: 100%;" >

        <mat-tab-group *ngIf="!tutorAcademico">
            
            <mat-tab *ngFor="let seccion of dataSourceV2" [label]="seccion.seccionName">
                <table mat-table [dataSource]="seccion.criteriaList" class="mat-elevation-z8">

                    <!--- Note that these columns can be defined in any order.
                          The actual rendered columns are set as a property on the row definition" -->
                  
                    <!-- Position Column -->
                    <ng-container matColumnDef="criterio">
                      <th mat-header-cell *matHeaderCellDef> Criterios </th>
                      <td mat-cell *matCellDef="let element" > {{element.criteriaName}} </td>
                      <td mat-footer-cell *matFooterCellDef> Total {{totalSum}} / 60</td>
                    </ng-container>
                
                    <ng-container matColumnDef="0" *ngIf="notaMaxima >= 0">
                        <th mat-header-cell *matHeaderCellDef> 0 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="0 <= element.maxNote" (change)="onCheckboxChange(element, 0)" [checked]="element.selectedCheckBoxIndex === 0"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                      <ng-container matColumnDef="1" *ngIf="notaMaxima >= 1">
                        <th mat-header-cell *matHeaderCellDef> 1 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="1 <= element.maxNote" (change)="onCheckboxChange(element, 1)" [checked]="element.selectedCheckBoxIndex === 1"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                      <ng-container matColumnDef="2" *ngIf="notaMaxima >= 2">
                        <th mat-header-cell *matHeaderCellDef> 2 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="2 <= element.maxNote" (change)="onCheckboxChange(element, 2)" [checked]="element.selectedCheckBoxIndex === 2"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                      <ng-container matColumnDef="3" *ngIf="notaMaxima >= 3">
                        <th mat-header-cell *matHeaderCellDef> 3 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="3 <= element.maxNote" (change)="onCheckboxChange(element, 3)" [checked]="element.selectedCheckBoxIndex === 3"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>
        
                      <ng-container matColumnDef="4" *ngIf="notaMaxima >= 4">
                        <th mat-header-cell *matHeaderCellDef> 4 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="4 <= element.maxNote" (change)="onCheckboxChange(element, 4)" [checked]="element.selectedCheckBoxIndex === 4"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
              
                      <ng-container matColumnDef="5" *ngIf="notaMaxima >= 5">
                        <th mat-header-cell *matHeaderCellDef> 5 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="5 <= element.maxNote" (change)="onCheckboxChange(element, 5)" [checked]="element.selectedCheckBoxIndex === 5"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                      <ng-container matColumnDef="6" *ngIf="notaMaxima >= 6">
                        <th mat-header-cell *matHeaderCellDef> 6 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="6 <= element.maxNote" (change)="onCheckboxChange(element, 6)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="7" *ngIf="notaMaxima >= 7">
                        <th mat-header-cell *matHeaderCellDef> 7 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="7 <= element.maxNote" (change)="onCheckboxChange(element, 7)" [checked]="element.selectedCheckBoxIndex === 7"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="8" *ngIf="notaMaxima >= 8">
                        <th mat-header-cell *matHeaderCellDef> 8 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="8 <= element.maxNote" (change)="onCheckboxChange(element, 8)" [checked]="element.selectedCheckBoxIndex === 8"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="9" *ngIf="notaMaxima >= 9">
                        <th mat-header-cell *matHeaderCellDef> 9 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="9 <= element.maxNote" (change)="onCheckboxChange(element, 9)" [checked]="element.selectedCheckBoxIndex === 9"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="10" *ngIf="notaMaxima >= 10">
                        <th mat-header-cell *matHeaderCellDef> 10 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="10 <= element.maxNote" (change)="onCheckboxChange(element, 10)" [checked]="element.selectedCheckBoxIndex === 10"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
                </table>
            </mat-tab>
                
        </mat-tab-group>
        


        <mat-tab-group *ngIf="tutorAcademico">
            
          <mat-tab *ngFor="let seccion of dataSourceV2" [label]="seccion.seccionName">
              <table mat-table [dataSource]="seccion.criteriaList" class="mat-elevation-z8">

                  <!--- Note that these columns can be defined in any order.
                        The actual rendered columns are set as a property on the row definition" -->
                
                  <!-- Position Column -->
                  <ng-container matColumnDef="criterio">
                    <th mat-header-cell *matHeaderCellDef> Criterios </th>
                    <td mat-cell *matCellDef="let element" > {{element.criteriaName}} </td>
                    <td mat-footer-cell *matFooterCellDef> Total {{totalSum}} / 60</td>
                  </ng-container>
              
                  <ng-container matColumnDef="0" *ngIf="notaMaxima >= 0">
                      <th mat-header-cell *matHeaderCellDef> 0 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="0 <= element.maxNote" (change)="onCheckboxChange(element, 0)" [checked]="element.selectedCheckBoxIndex === 0"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
      
                    <ng-container matColumnDef="1" *ngIf="notaMaxima >= 1">
                      <th mat-header-cell *matHeaderCellDef> 1 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="1 <= element.maxNote" (change)="onCheckboxChange(element, 1)" [checked]="element.selectedCheckBoxIndex === 1"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
      
                    <ng-container matColumnDef="2" *ngIf="notaMaxima >= 2">
                      <th mat-header-cell *matHeaderCellDef> 2 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="2 <= element.maxNote" (change)="onCheckboxChange(element, 2)" [checked]="element.selectedCheckBoxIndex === 2"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
      
                    <ng-container matColumnDef="3" *ngIf="notaMaxima >= 3">
                      <th mat-header-cell *matHeaderCellDef> 3 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="3 <= element.maxNote" (change)="onCheckboxChange(element, 3)" [checked]="element.selectedCheckBoxIndex === 3"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>
      
                    <ng-container matColumnDef="4" *ngIf="notaMaxima >= 4">
                      <th mat-header-cell *matHeaderCellDef> 4 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="4 <= element.maxNote" (change)="onCheckboxChange(element, 4)" [checked]="element.selectedCheckBoxIndex === 4"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
            
                    <ng-container matColumnDef="5" *ngIf="notaMaxima >= 5">
                      <th mat-header-cell *matHeaderCellDef> 5 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="5 <= element.maxNote" (change)="onCheckboxChange(element, 5)" [checked]="element.selectedCheckBoxIndex === 5"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
      
                    <ng-container matColumnDef="6" *ngIf="notaMaxima >= 6">
                      <th mat-header-cell *matHeaderCellDef> 6 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="6 <= element.maxNote" (change)="onCheckboxChange(element, 6)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="7" *ngIf="notaMaxima >= 7">
                      <th mat-header-cell *matHeaderCellDef> 7 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="7 <= element.maxNote" (change)="onCheckboxChange(element, 7)" [checked]="element.selectedCheckBoxIndex === 7"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="8" *ngIf="notaMaxima >= 8">
                      <th mat-header-cell *matHeaderCellDef> 8 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="8 <= element.maxNote" (change)="onCheckboxChange(element, 8)" [checked]="element.selectedCheckBoxIndex === 8"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="9" *ngIf="notaMaxima >= 9">
                      <th mat-header-cell *matHeaderCellDef> 9 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="9 <= element.maxNote" (change)="onCheckboxChange(element, 9)" [checked]="element.selectedCheckBoxIndex === 9"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="10" *ngIf="notaMaxima >= 10">
                      <th mat-header-cell *matHeaderCellDef> 10 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="10 <= element.maxNote" (change)="onCheckboxChange(element, 10)" [checked]="element.selectedCheckBoxIndex === 10"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="11" *ngIf="notaMaxima >= 11">
                      <th mat-header-cell *matHeaderCellDef> 11 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="11 <= element.maxNote" (change)="onCheckboxChange(element, 11)" [checked]="element.selectedCheckBoxIndex === 11"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="12" *ngIf="notaMaxima >= 12">
                      <th mat-header-cell *matHeaderCellDef> 12 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="12 <= element.maxNote" (change)="onCheckboxChange(element, 12)" [checked]="element.selectedCheckBoxIndex === 12"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="13" *ngIf="notaMaxima >= 13">
                      <th mat-header-cell *matHeaderCellDef> 13 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="13 <= element.maxNote" (change)="onCheckboxChange(element, 13)" [checked]="element.selectedCheckBoxIndex === 13"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
      
                    <ng-container matColumnDef="14" *ngIf="notaMaxima >= 14">
                      <th mat-header-cell *matHeaderCellDef> 14 </th>
                      <td mat-cell *matCellDef="let element" >
                          <mat-checkbox *ngIf="14 <= element.maxNote" (change)="onCheckboxChange(element, 14)" [checked]="element.selectedCheckBoxIndex === 14"></mat-checkbox>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                  <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
              </table>
          </mat-tab>
              
      </mat-tab-group>

      
    <div style="display: flex; align-items: center; justify-content: flex-end; height: 10%;">
      <button mat-raised-button color="primary" [disabled]="!allNotesAreSelected" (click)="generarPlanilla()">Generar Planilla</button>
    </div>
  
</div>
</div>

<div *ngIf="!generadorAbierto" style="display: flex; justify-content: center; align-items: center; height: 100%; width: 100%;"  >
  <h1><strong>El formulario no se encuentra disponible</strong></h1>
</div>
