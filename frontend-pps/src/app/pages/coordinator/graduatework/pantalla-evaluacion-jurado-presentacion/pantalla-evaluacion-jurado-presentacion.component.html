<div style="display: flex; justify-content: center; background-color: aliceblue; flex-direction: column; height: 100%;">
    <h1 style="display: flex; align-items: center; justify-content: center; margin-top: 5%;"><strong>Evaluación Tutor </strong></h1>
    <p style=" display: flex; align-items: center; justify-content: center;">Bienvenido</p>
    <p style=" display: flex; align-items: center; justify-content: center; margin-bottom: 1%;" >Para generar la planillas selecciona todos los criterios y se creará automáticamente </p>
    <div style=" height: 100%;" >

        <mat-tab-group *ngIf="esTutorAcademico">
          
            <!-- 
            <mat-tab *ngFor="let seccion of dataSourceV2" [label]="seccion.seccionName + ' ' + ((seccion?.userName) ? seccion?.userName :'') ">
                <table mat-table [dataSource]="seccion.criteriaList" class="mat-elevation-z8">


                    <ng-container matColumnDef="criterio">
                      <th mat-header-cell *matHeaderCellDef> Criterios </th>
                      <td mat-cell *matCellDef="let element" > {{element.criteriaName}} </td>
                      <td mat-footer-cell *matFooterCellDef> Total {{totalSum}} / 60</td>
                    </ng-container>
                
                    <ng-container matColumnDef="0" *ngIf="notaMaxima >= 0">
                        <th mat-header-cell *matHeaderCellDef> 0 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="0 <= element.maxNote" (change)="onCheckboxChange(element, 0)" [checked]="element.selectedCheckBoxIndex === 0"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                      <ng-container matColumnDef="1" *ngIf="notaMaxima >= 1">
                        <th mat-header-cell *matHeaderCellDef> 1 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="1 <= element.maxNote" (change)="onCheckboxChange(element, 1)" [checked]="element.selectedCheckBoxIndex === 1"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                      <ng-container matColumnDef="2" *ngIf="notaMaxima >= 2">
                        <th mat-header-cell *matHeaderCellDef> 2 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="2 <= element.maxNote" (change)="onCheckboxChange(element, 2)" [checked]="element.selectedCheckBoxIndex === 2"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                      <ng-container matColumnDef="3" *ngIf="notaMaxima >= 3">
                        <th mat-header-cell *matHeaderCellDef> 3 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="3 <= element.maxNote" (change)="onCheckboxChange(element, 3)" [checked]="element.selectedCheckBoxIndex === 3"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> {{totalSum}} / 20</td>
                      </ng-container>
        
                      <ng-container matColumnDef="4" *ngIf="notaMaxima >= 4">
                        <th mat-header-cell *matHeaderCellDef> 4 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="4 <= element.maxNote" (change)="onCheckboxChange(element, 4)" [checked]="element.selectedCheckBoxIndex === 4"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
              
                      <ng-container matColumnDef="5" *ngIf="notaMaxima >= 5">
                        <th mat-header-cell *matHeaderCellDef> 5 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="5 <= element.maxNote" (change)="onCheckboxChange(element, 5)" [checked]="element.selectedCheckBoxIndex === 5"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                      <ng-container matColumnDef="6" *ngIf="notaMaxima >= 6">
                        <th mat-header-cell *matHeaderCellDef> 6 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="6 <= element.maxNote" (change)="onCheckboxChange(element, 6)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="7" *ngIf="notaMaxima >= 7">
                        <th mat-header-cell *matHeaderCellDef> 7 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="7 <= element.maxNote" (change)="onCheckboxChange(element, 7)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="8" *ngIf="notaMaxima >= 8">
                        <th mat-header-cell *matHeaderCellDef> 8 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="8 <= element.maxNote" (change)="onCheckboxChange(element, 8)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="9" *ngIf="notaMaxima >= 9">
                        <th mat-header-cell *matHeaderCellDef> 9 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="9 <= element.maxNote" (change)="onCheckboxChange(element, 9)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="10" *ngIf="notaMaxima >= 10">
                        <th mat-header-cell *matHeaderCellDef> 10 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="10 <= element.maxNote" (change)="onCheckboxChange(element, 10)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="11" *ngIf="notaMaxima >= 11">
                        <th mat-header-cell *matHeaderCellDef> 11 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="11 <= element.maxNote" (change)="onCheckboxChange(element, 11)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="12" *ngIf="notaMaxima >= 12">
                        <th mat-header-cell *matHeaderCellDef> 12 </th>
                        <td mat-cell *matCellDef="let element" >
                            <mat-checkbox *ngIf="12 <= element.maxNote" (change)="onCheckboxChange(element, 12)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
        
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
                </table>
            </mat-tab>
          -->
          <mat-tab label=" Evaluación de la Presentación y Defensa">
            <table mat-table [dataSource]="criteriosComunes" class="mat-elevation-z8">


              <ng-container matColumnDef="criterio">
                <th mat-header-cell *matHeaderCellDef> Criterios </th>
                <td mat-cell *matCellDef="let element" > {{element.criteriaName}} </td>
                <td mat-footer-cell *matFooterCellDef> {{criteriosComunesSum}} / 20</td>
              </ng-container>
          
              <ng-container matColumnDef="0" *ngIf="notaMaxima >= 0">
                  <th mat-header-cell *matHeaderCellDef> 0 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="0 <= element.maxNote" (change)="onCheckboxChangeV2(element, 0)" [checked]="element.selectedCheckBoxIndex === 0"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
                <ng-container matColumnDef="1" *ngIf="notaMaxima >= 1">
                  <th mat-header-cell *matHeaderCellDef> 1 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="1 <= element.maxNote" (change)="onCheckboxChangeV2(element, 1)" [checked]="element.selectedCheckBoxIndex === 1"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
                <ng-container matColumnDef="2" *ngIf="notaMaxima >= 2">
                  <th mat-header-cell *matHeaderCellDef> 2 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="2 <= element.maxNote" (change)="onCheckboxChangeV2(element, 2)" [checked]="element.selectedCheckBoxIndex === 2"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
                <ng-container matColumnDef="3" *ngIf="notaMaxima >= 3">
                  <th mat-header-cell *matHeaderCellDef> 3 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="3 <= element.maxNote" (change)="onCheckboxChangeV2(element, 3)" [checked]="element.selectedCheckBoxIndex === 3"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
                <ng-container matColumnDef="4" *ngIf="notaMaxima >= 4">
                  <th mat-header-cell *matHeaderCellDef> 4 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="4 <= element.maxNote" (change)="onCheckboxChangeV2(element, 4)" [checked]="element.selectedCheckBoxIndex === 4"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
        
                <ng-container matColumnDef="5" *ngIf="notaMaxima >= 5">
                  <th mat-header-cell *matHeaderCellDef> 5 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="5 <= element.maxNote" (change)="onCheckboxChangeV2(element, 5)" [checked]="element.selectedCheckBoxIndex === 5"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
                <ng-container matColumnDef="6" *ngIf="notaMaxima >= 6">
                  <th mat-header-cell *matHeaderCellDef> 6 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="6 <= element.maxNote" (change)="onCheckboxChangeV2(element, 6)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="7" *ngIf="notaMaxima >= 7">
                  <th mat-header-cell *matHeaderCellDef> 7 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="7 <= element.maxNote" (change)="onCheckboxChangeV2(element, 7)" [checked]="element.selectedCheckBoxIndex === 7"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="8" *ngIf="notaMaxima >= 8">
                  <th mat-header-cell *matHeaderCellDef> 8 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="8 <= element.maxNote" (change)="onCheckboxChangeV2(element, 8)" [checked]="element.selectedCheckBoxIndex === 8"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="9" *ngIf="notaMaxima >= 9">
                  <th mat-header-cell *matHeaderCellDef> 9 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="9 <= element.maxNote" (change)="onCheckboxChangeV2(element, 9)" [checked]="element.selectedCheckBoxIndex === 9"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="10" *ngIf="notaMaxima >= 10">
                  <th mat-header-cell *matHeaderCellDef> 10 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="10 <= element.maxNote" (change)="onCheckboxChangeV2(element, 10)" [checked]="element.selectedCheckBoxIndex === 10"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="11" *ngIf="notaMaxima >= 11">
                  <th mat-header-cell *matHeaderCellDef> 11 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="11 <= element.maxNote" (change)="onCheckboxChangeV2(element, 11)" [checked]="element.selectedCheckBoxIndex === 11"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="12" *ngIf="notaMaxima >= 12">
                  <th mat-header-cell *matHeaderCellDef> 12 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="12 <= element.maxNote" (change)="onCheckboxChangeV2(element, 12)" [checked]="element.selectedCheckBoxIndex === 12"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
          </table>
            
          </mat-tab>
          <mat-tab *ngFor="let estudiante of this.seccionExperiment" [label]="estudiante.userName">
            <table mat-table [dataSource]="estudiante.criteriaList" class="mat-elevation-z8">


              <ng-container matColumnDef="criterio">
                <th mat-header-cell *matHeaderCellDef> Criterios </th>
                <td mat-cell *matCellDef="let element" > {{element.criteriaName}} </td>
                <td mat-footer-cell *matFooterCellDef> Total {{estudiante.sum}} / 20</td>
              </ng-container>
          
              <ng-container matColumnDef="0" *ngIf="notaMaximaV2 >= 0">
                  <th mat-header-cell *matHeaderCellDef> 0 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="0 <= element.maxNote" (change)="onCheckboxChange(element, 0)" [checked]="element.selectedCheckBoxIndex === 0"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
                <ng-container matColumnDef="1" *ngIf="notaMaximaV2 >= 1">
                  <th mat-header-cell *matHeaderCellDef> 1 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="1 <= element.maxNote" (change)="onCheckboxChange(element, 1)" [checked]="element.selectedCheckBoxIndex === 1"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
                <ng-container matColumnDef="2" *ngIf="notaMaximaV2 >= 2">
                  <th mat-header-cell *matHeaderCellDef> 2 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="2 <= element.maxNote" (change)="onCheckboxChange(element, 2)" [checked]="element.selectedCheckBoxIndex === 2"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
                <ng-container matColumnDef="3" *ngIf="notaMaximaV2 >= 3">
                  <th mat-header-cell *matHeaderCellDef> 3 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="3 <= element.maxNote" (change)="onCheckboxChange(element, 3)" [checked]="element.selectedCheckBoxIndex === 3"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>
  
                <ng-container matColumnDef="4" *ngIf="notaMaximaV2 >= 4">
                  <th mat-header-cell *matHeaderCellDef> 4 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="4 <= element.maxNote" (change)="onCheckboxChange(element, 4)" [checked]="element.selectedCheckBoxIndex === 4"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
        
                <ng-container matColumnDef="5" *ngIf="notaMaximaV2 >= 5">
                  <th mat-header-cell *matHeaderCellDef> 5 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="5 <= element.maxNote" (change)="onCheckboxChange(element, 5)" [checked]="element.selectedCheckBoxIndex === 5"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
                <ng-container matColumnDef="6" *ngIf="notaMaximaV2 >= 6">
                  <th mat-header-cell *matHeaderCellDef> 6 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="6 <= element.maxNote" (change)="onCheckboxChange(element, 6)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="7" *ngIf="notaMaximaV2 >= 7">
                  <th mat-header-cell *matHeaderCellDef> 7 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="7 <= element.maxNote" (change)="onCheckboxChange(element, 7)" [checked]="element.selectedCheckBoxIndex === 7"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="8" *ngIf="notaMaximaV2 >= 8">
                  <th mat-header-cell *matHeaderCellDef> 8 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="8 <= element.maxNote" (change)="onCheckboxChange(element, 8)" [checked]="element.selectedCheckBoxIndex === 8"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="9" *ngIf="notaMaximaV2 >= 9">
                  <th mat-header-cell *matHeaderCellDef> 9 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="9 <= element.maxNote" (change)="onCheckboxChange(element, 9)" [checked]="element.selectedCheckBoxIndex === 9"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="10" *ngIf="notaMaximaV2 >= 10">
                  <th mat-header-cell *matHeaderCellDef> 10 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="10 <= element.maxNote" (change)="onCheckboxChange(element, 10)" [checked]="element.selectedCheckBoxIndex === 10"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="11" *ngIf="notaMaximaV2 >= 11">
                  <th mat-header-cell *matHeaderCellDef> 11 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="11 <= element.maxNote" (change)="onCheckboxChange(element, 11)" [checked]="element.selectedCheckBoxIndex === 11"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="12" *ngIf="notaMaximaV2 >= 12">
                  <th mat-header-cell *matHeaderCellDef> 12 </th>
                  <td mat-cell *matCellDef="let element" >
                      <mat-checkbox *ngIf="12 <= element.maxNote" (change)="onCheckboxChange(element, 12)" [checked]="element.selectedCheckBoxIndex === 12"></mat-checkbox>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
  
              <tr mat-header-row *matHeaderRowDef="displayedColumnsV2"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumnsV2;"></tr>
              <tr mat-footer-row *matFooterRowDef="displayedColumnsV2"></tr>
          </table>
            
          </mat-tab>

        </mat-tab-group>



        <mat-tab-group *ngIf="!esTutorAcademico">
          
        <mat-tab label=" Evaluación de la Presentación y Defensa">
          <table mat-table [dataSource]="criteriosComunes" class="mat-elevation-z8">


            <ng-container matColumnDef="criterio">
              <th mat-header-cell *matHeaderCellDef> Criterios </th>
              <td mat-cell *matCellDef="let element" > {{element.criteriaName}} </td>
              <td mat-footer-cell *matFooterCellDef> {{criteriosComunesSum}} / 20</td>
            </ng-container>
        
            <ng-container matColumnDef="0" *ngIf="notaMaxima >= 0">
                <th mat-header-cell *matHeaderCellDef> 0 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="0 <= element.maxNote" (change)="onCheckboxChangeV2(element, 0)" [checked]="element.selectedCheckBoxIndex === 0"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="1" *ngIf="notaMaxima >= 1">
                <th mat-header-cell *matHeaderCellDef> 1 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="1 <= element.maxNote" (change)="onCheckboxChangeV2(element, 1)" [checked]="element.selectedCheckBoxIndex === 1"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="2" *ngIf="notaMaxima >= 2">
                <th mat-header-cell *matHeaderCellDef> 2 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="2 <= element.maxNote" (change)="onCheckboxChangeV2(element, 2)" [checked]="element.selectedCheckBoxIndex === 2"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="3" *ngIf="notaMaxima >= 3">
                <th mat-header-cell *matHeaderCellDef> 3 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="3 <= element.maxNote" (change)="onCheckboxChangeV2(element, 3)" [checked]="element.selectedCheckBoxIndex === 3"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="4" *ngIf="notaMaxima >= 4">
                <th mat-header-cell *matHeaderCellDef> 4 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="4 <= element.maxNote" (change)="onCheckboxChangeV2(element, 4)" [checked]="element.selectedCheckBoxIndex === 4"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
      
              <ng-container matColumnDef="5" *ngIf="notaMaxima >= 5">
                <th mat-header-cell *matHeaderCellDef> 5 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="5 <= element.maxNote" (change)="onCheckboxChangeV2(element, 5)" [checked]="element.selectedCheckBoxIndex === 5"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="6" *ngIf="notaMaxima >= 6">
                <th mat-header-cell *matHeaderCellDef> 6 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="6 <= element.maxNote" (change)="onCheckboxChangeV2(element, 6)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="7" *ngIf="notaMaxima >= 7">
                <th mat-header-cell *matHeaderCellDef> 7 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="7 <= element.maxNote" (change)="onCheckboxChangeV2(element, 7)" [checked]="element.selectedCheckBoxIndex === 7"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="8" *ngIf="notaMaxima >= 8">
                <th mat-header-cell *matHeaderCellDef> 8 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="8 <= element.maxNote" (change)="onCheckboxChangeV2(element, 8)" [checked]="element.selectedCheckBoxIndex === 8"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="9" *ngIf="notaMaxima >= 9">
                <th mat-header-cell *matHeaderCellDef> 9 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="9 <= element.maxNote" (change)="onCheckboxChangeV2(element, 9)" [checked]="element.selectedCheckBoxIndex === 9"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="10" *ngIf="notaMaxima >= 10">
                <th mat-header-cell *matHeaderCellDef> 10 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="10 <= element.maxNote" (change)="onCheckboxChangeV2(element, 10)" [checked]="element.selectedCheckBoxIndex === 10"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="11" *ngIf="notaMaxima >= 11">
                <th mat-header-cell *matHeaderCellDef> 11 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="11 <= element.maxNote" (change)="onCheckboxChangeV2(element, 11)" [checked]="element.selectedCheckBoxIndex === 11"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="12" *ngIf="notaMaxima >= 12">
                <th mat-header-cell *matHeaderCellDef> 12 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="12 <= element.maxNote" (change)="onCheckboxChangeV2(element, 12)" [checked]="element.selectedCheckBoxIndex === 12"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
        </table>
          
        </mat-tab>
        <mat-tab *ngFor="let estudiante of this.seccionExperiment" [label]="estudiante.userName">
          <table mat-table [dataSource]="estudiante.criteriaList" class="mat-elevation-z8">


            <ng-container matColumnDef="criterio">
              <th mat-header-cell *matHeaderCellDef> Criterios </th>
              <td mat-cell *matCellDef="let element" > {{element.criteriaName}} </td>
              <td mat-footer-cell *matFooterCellDef> Total {{estudiante.sum}} / 20</td>
            </ng-container>
        
            <ng-container matColumnDef="0" *ngIf="notaMaximaV2 >= 0">
                <th mat-header-cell *matHeaderCellDef> 0 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="0 <= element.maxNote" (change)="onCheckboxChange(element, 0)" [checked]="element.selectedCheckBoxIndex === 0"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="1" *ngIf="notaMaximaV2 >= 1">
                <th mat-header-cell *matHeaderCellDef> 1 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="1 <= element.maxNote" (change)="onCheckboxChange(element, 1)" [checked]="element.selectedCheckBoxIndex === 1"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="2" *ngIf="notaMaximaV2 >= 2">
                <th mat-header-cell *matHeaderCellDef> 2 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="2 <= element.maxNote" (change)="onCheckboxChange(element, 2)" [checked]="element.selectedCheckBoxIndex === 2"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="3" *ngIf="notaMaximaV2 >= 3">
                <th mat-header-cell *matHeaderCellDef> 3 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="3 <= element.maxNote" (change)="onCheckboxChange(element, 3)" [checked]="element.selectedCheckBoxIndex === 3"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef></td>
              </ng-container>

              <ng-container matColumnDef="4" *ngIf="notaMaximaV2 >= 4">
                <th mat-header-cell *matHeaderCellDef> 4 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="4 <= element.maxNote" (change)="onCheckboxChange(element, 4)" [checked]="element.selectedCheckBoxIndex === 4"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
      
              <ng-container matColumnDef="5" *ngIf="notaMaximaV2 >= 5">
                <th mat-header-cell *matHeaderCellDef> 5 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="5 <= element.maxNote" (change)="onCheckboxChange(element, 5)" [checked]="element.selectedCheckBoxIndex === 5"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="6" *ngIf="notaMaximaV2 >= 6">
                <th mat-header-cell *matHeaderCellDef> 6 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="6 <= element.maxNote" (change)="onCheckboxChange(element, 6)" [checked]="element.selectedCheckBoxIndex === 6"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="7" *ngIf="notaMaximaV2 >= 7">
                <th mat-header-cell *matHeaderCellDef> 7 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="7 <= element.maxNote" (change)="onCheckboxChange(element, 7)" [checked]="element.selectedCheckBoxIndex === 7"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="8" *ngIf="notaMaximaV2 >= 8">
                <th mat-header-cell *matHeaderCellDef> 8 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="8 <= element.maxNote" (change)="onCheckboxChange(element, 8)" [checked]="element.selectedCheckBoxIndex === 8"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="9" *ngIf="notaMaximaV2 >= 9">
                <th mat-header-cell *matHeaderCellDef> 9 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="9 <= element.maxNote" (change)="onCheckboxChange(element, 9)" [checked]="element.selectedCheckBoxIndex === 9"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="10" *ngIf="notaMaximaV2 >= 10">
                <th mat-header-cell *matHeaderCellDef> 10 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="10 <= element.maxNote" (change)="onCheckboxChange(element, 10)" [checked]="element.selectedCheckBoxIndex === 10"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="11" *ngIf="notaMaximaV2 >= 11">
                <th mat-header-cell *matHeaderCellDef> 11 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="11 <= element.maxNote" (change)="onCheckboxChange(element, 11)" [checked]="element.selectedCheckBoxIndex === 11"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="12" *ngIf="notaMaximaV2 >= 12">
                <th mat-header-cell *matHeaderCellDef> 12 </th>
                <td mat-cell *matCellDef="let element" >
                    <mat-checkbox *ngIf="12 <= element.maxNote" (change)="onCheckboxChange(element, 12)" [checked]="element.selectedCheckBoxIndex === 12"></mat-checkbox>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumnsV2"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsV2;"></tr>
            <tr mat-footer-row *matFooterRowDef="displayedColumnsV2"></tr>
        </table>
          
        </mat-tab>

      </mat-tab-group>

      
    <div style="display: flex; align-items: center; justify-content: flex-end; height: 10%;">
      <button mat-raised-button color="primary" [disabled]="!allNotesAreSelected" (click)="generarPlanilla()">Generar Planilla</button>
    </div>
  
</div>